<div class="schedule">
  <div class=schedule__table_header>
    <div class="schedule__filters">
        <div class="inputGroup">
          <input class="input__radio" type="radio" id="allDays" name="option" (change)="getAllDays('exportPdf-f')" >
          <label class="label__radio" for="allDays">All days</label>
        </div>
        <div class="inputGroup">
          <input class="input__radio" type="radio" id="thisWeek" name="option" (change)="getDaysForWeek('exportPdf-w')" checked>
          <label class="label__radio" for="thisWeek">For this week</label>
        </div>
        <div class="inputGroup">
          <input class="input__radio" type="radio" id="range" name="option" (change)="setFilterOption()">
          <label class="label__radio" for="range">Range</label>
        </div>
    </div>
    <button class="icon__medium export__pdf" title="Export to PDF" (click)="exportPdf()"><img src="../../assets/images/icons/pdf.svg" alt=""></button>
  </div>
  <div class="inputGroup" *ngIf="rangeFilter">
    <form action="" [formGroup]="rangeGroup" (ngSubmit)="filterByRange()">
      <div>
        <label for="from">From</label>
        <input type="date" formControlName="dayAfter" required>
      </div>
      <div>
        <label for="to">To</label>
        <input type="date" formControlName="dayBefore" required>
      </div>
      <button type="submit">Search</button>
    </form>
</div>
    <div *ngIf="days != null && days.length != 0;else scheduleNotFound">
      <table class="table__header_days">
        <thead>
          <tr>
            <th>Time from</th>
            <th>Time to</th>
            <th>Teacher</th>
            <th>Subject</th>
            <th>Type</th>
            <th>Group</th>
            <th>Room</th>
            <th *ngIf="isAdmin || isEditable">Edit</th>
          </tr>
        </thead>
      </table>
      <table class="table_day" *ngFor="let day of days">
        <thead>
          <tr>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th *ngIf="isAdmin || isEditable"></th>
          </tr>
        </thead>
        <div class="day__header_button">
          <h3 class="day_header">{{day.day | date: 'dd-MM-yyyy'}}</h3>
          <div class="day__control_buttons">
            <button title="Add new Lesson to {{day.day}}" *ngIf="isAdmin" class="icon__medium"  (click)="setCurrentDay(day)"><img src="../../assets/images/icons/add.svg" alt=""></button> 
            <button title="Delete day {{day.day}}" *ngIf="isAdmin" class="icon__medium"  (click)="deleteDayFromSchedule(day)"><img src="../../assets/images/icons/delete.svg" alt=""></button> 
          
          </div>
        </div>
        <tbody>
          <ng-container *ngFor="let lesson of day.lessons">
            <div class="lesson__comment" *ngIf="lesson.comment != null">
              <img [title]="lesson.comment" class="icon__medium" src="../../assets/images/icons/caution.svg" alt="">
            </div>
            <tr class="lesson" [class.discarded__status]="lesson.status == 'DISCARDED'" [class.pending__status]="teacherId == lesson.subjectTeacher.teacher.id && lesson.status == 'PENDING'">
              <th [ngStyle]="{'width': isAdmin ? '225px' : '230px'}">{{lesson.dateStart | date: "HH:mm"}}</th>
              <th [ngStyle]="{'width': isAdmin ? '225px' : '230px'}">{{lesson.dateEnd | date: "HH:mm"}}</th>
              <th [ngStyle]="{'width': isAdmin ? '225px' : '230px'}">{{lesson.subjectTeacher.teacher.firstName}} {{lesson.subjectTeacher.teacher.lastName}}</th>
              <th [ngStyle]="{'width': isAdmin ? '225px' : '230px'}">{{lesson.subjectTeacher.subject.name}}</th>
              <th [ngStyle]="{'width': isAdmin ? '225px' : '230px'}">{{lesson.subjectTeacher.subject.type}}</th>
              <th [ngStyle]="{'width': isAdmin ? '225px' : '230px'}">{{lesson.groupName}}</th>
              <th [ngStyle]="{'width': isAdmin ? '225px' : '230px'}">{{lesson.roomNumber}}</th>
              <th [ngStyle]="{'width': isAdmin ? '225px' : '230px'}" *ngIf="isAdmin || isEditable">
                <div>
                  <button *ngIf="isAdmin" title="Remove {{lesson.subjectTeacher.subject.name}}" class="icon__small" (click)="deleteLessonFromDay(lesson, day)"><img src="../../assets/images/icons/delete.svg" alt=""></button> 
                  <button *ngIf="isAdmin" title="Edit {{lesson.subjectTeacher.subject.name}}" class="icon__small" (click)="editLessonInDay(lesson, day)"><img src="../../assets/images/icons/edit.svg" alt=""></button> 
                  <button *ngIf="(isAdmin || teacherId == lesson.subjectTeacher.teacher.id) && lesson.status != 'PENDING'" title="Change status" class="icon__small" (click)="changeStatus(lesson, day)"><img src="../../assets/images/icons/settings.svg" alt=""></button>
                </div>
              </th>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
    <button *ngIf="scheduleId != null && isAdmin" (click)="addNewScheduleDay()">Add day</button>
    <ng-template #scheduleNotFound>
      <div class="schedule__not_found">
        <h2>Schedule not found</h2>
      </div>
    </ng-template>
  </div>



